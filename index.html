<!doctype html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Điểm danh</title>

  <!-- Bootstrap -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >

  <style>
    body {
      background: #f1e7ff;
      min-height: 100vh;
      margin: 0;
      padding: 0;
    }
    .form-box {
      background: white;
      max-width: 650px;
      margin: 40px auto;
      padding: 30px;
      border-radius: 10px;
      border-top: 8px solid #673ab7;
      position: relative;
    }
    .submit-btn {
      background: #673ab7;
      border: none;
      font-weight: 600;
    }
    .submit-btn:disabled {
      opacity: .5;
    }
  </style>
</head>
<body>

  <div class="form-box shadow-sm">

      <h4 class="mb-4 fw-bold text-center">Điểm danh sinh viên</h4>

      <form id="attendanceForm">

        <!-- Họ và tên -->
        <div class="mb-4">
         <label class="form-label fw-semibold">Họ và tên <span class="text-danger">*</span></label>
         <input type="text" class="form-control" id="fullname" placeholder="Câu trả lời của bạn" required>
        </div>
        <!-- Lớp -->
        <div class="mb-4">
          <label class="form-label fw-semibold">Lớp <span class="text-danger">*</span></label>
          <input type="text" class="form-control" id="class"  placeholder="Câu trả lời của bạn" required>
        </div>

        <!-- MSSV -->
        <div class="mb-4">
          <label class="form-label fw-semibold">Mã số sinh viên <span class="text-danger">*</span></label>
          <input type="text" class="form-control" id="studentId"  placeholder="Câu trả lời của bạn" required>
        </div>

        <!-- Đơn vị -->
        <div class="mb-4">
          <label class="form-label fw-semibold">Đơn vị <span class="text-danger">*</span></label>

          <div class="form-check mt-1">
            <input class="form-check-input" type="radio" name="donvi" value="Trường Khoa học xã hội và Nhân văn" required>
            <label class="form-check-label">Trường Khoa học xã hội và Nhân văn</label>
          </div>

          <div class="form-check mt-1">
            <input class="form-check-input" type="radio" name="donvi" value="Trường Sư phạm">
            <label class="form-check-label">Trường Sư phạm</label>
          </div>

          <div class="form-check mt-1">
            <input class="form-check-input" type="radio" name="donvi" value="Trường Kinh tế">
            <label class="form-check-label">Trường Kinh tế</label>
          </div>

          <div class="form-check mt-1">
            <input class="form-check-input" type="radio" name="donvi" value="Viện Kỹ thuật và công nghệ">
            <label class="form-check-label">Viện Kỹ thuật và Công nghệ</label>
          </div>

          <div class="form-check mt-1">
            <input class="form-check-input" type="radio" name="donvi" value="Viện Công nghệ hóa sinh và Môi trường">
            <label class="form-check-label">Viện Công nghệ hóa sinh và Môi trường</label>
          </div>

          <div class="form-check mt-1">
            <input class="form-check-input" type="radio" name="donvi" value="Viện Nông nghiệp và Tài nguyên">
            <label class="form-check-label">Viện Nông nghiệp và Tài nguyên</label>
          </div>

          <div class="form-check mt-1">
            <input class="form-check-input" type="radio" name="donvi" value="Khoa Sư phạm ngoại ngữ">
            <label class="form-check-label">Khoa Sư phạm ngoại ngữ</label>
          </div>

          <div class="form-check mt-1">
            <input class="form-check-input" type="radio" name="donvi" value="Khoa Xây dựng">
            <label class="form-check-label">Khoa Xây dựng</label>
          </div>

          <div class="form-check mt-1">
            <input class="form-check-input" type="radio" name="donvi" value="Trung tâm Giáo dục quốc phòng và An ninh">
            <label class="form-check-label">Trung tâm Giáo dục quốc phòng và An ninh</label>
          </div>

        </div>

        <!-- Nút gửi -->
        <button class="btn btn-primary submit-btn w-100" id="submitBtn" disabled>
          Điểm danh
        </button>

      </form>
  </div>

<script>
  const inputs = document.querySelectorAll("input");
  const submitBtn = document.getElementById("submitBtn");
  let readyToSubmit = false; // Biến xác định lần nhấn thứ 2

  // Hàm validate form
  function validateForm() {
    let valid = true;
    inputs.forEach(i => {
      if (i.type === "radio") {
        if (!document.querySelector('input[name="donvi"]:checked')) valid = false;
      } else {
        if (!i.value.trim()) valid = false;
      }
    });
    submitBtn.disabled = !valid;
  }
  inputs.forEach(i => i.addEventListener("input", validateForm));

  const form = document.getElementById("attendanceForm");

  form.addEventListener("submit", function(e) {
    e.preventDefault(); // Ngăn submit mặc định

    if (!readyToSubmit) {
      // Lần đầu nhấn: ẩn nút
      submitBtn.style.display = 'none';
      readyToSubmit = true;

      // Thêm sự kiện click trên body để hiện nút lại
      document.body.addEventListener("click", function showBtn(e) {
        // Tránh nhấn lại vào chính nút đã ẩn
        if (e.target !== submitBtn) {
          submitBtn.style.display = 'block';
          // Chỉ hiện 1 lần → remove event
          document.body.removeEventListener("click", showBtn);
        }
      });
    } else {
      // Lần thứ 2: chuyển trang
      window.location.href = "video.html";
    }
  });
</script>

</body>
</html>
